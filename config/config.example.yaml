# Discord Bot 配置
discord:
  token: "YOUR_DISCORD_BOT_TOKEN_HERE"
  # 从 https://discord.com/developers/applications 获取
  command_prefix: "!"
  # 允许的频道 ID 列表（空列表表示所有频道）
  allowed_channels: []
  # 允许的用户 ID 列表（空列表表示所有用户）
  allowed_users: []
  # 启动通知配置（可选，留空则不发送启动通知）
  startup_notification_channel: ""  # 频道 ID（留空）
  startup_notification_user: ""  # 用户 ID（私聊）
  # 斜杠命令同步配置（留空 = 全局同步，需要等待几分钟生效）
  # 填写服务器 ID 可以立即同步命令到该服务器
  # 获取方法：Discord 开发者模式 → 右键服务器 → 复制 ID
  sync_guild_id: ""  # 服务器 ID（留空则使用全局同步）

# Claude Code 桥接配置
claude:
  # claude 可执行文件路径（如果已在 PATH 中可省略）
  executable: "claude"
  # 每次对话的超时时间（秒）
  timeout: 30
  # 最大重试次数
  max_retries: 3
  # 工作目录（可选，留空则使用当前目录）
  # 对于需要访问特定项目文件的任务很有用
  working_directory: ""
  # 会话模式：固定为 global（全局共享会话）

# 文件下载配置
file_download:
  # 默认下载目录（支持相对路径和绝对路径）
  # 相对路径基于工作区根目录（D:/AgentWorkspace）
  default_directory: "./downloads"
  # 允许的下载目录列表（空列表 = 允许所有目录）
  # 安全限制：防止下载到系统目录
  allowed_directories: []

# 消息队列配置
queue:
  # 消息数据库路径
  database_path: "./shared/messages.db"
  # 消息轮询间隔（毫秒）
  poll_interval: 500
  # 消息保留时间（小时，0 = 永久保留）
  message_retention_hours: 24

# 首次对话提示词注入配置
auto_load:
  # 首次对话提示词注入，可用于加载系统
  # 启用该功能需要您自己有记忆系统的实现。
  enabled: false
  # 加载记忆的提示文本（会添加到消息前面）
  prompt_text: "加载记忆。"

# 直接回复模式配置
direct_reply:
  # 是否启用直接回复模式
  enabled: false

  # 启用后的行为：
  # - 不发送 PENDING/PROCESSING/AI_STARTED 等状态提示消息
  # - 显示 typing indicator（Discord "正在输入"状态）
  # - 不使用 Embed 卡片，改为纯文本消息
  # - 不显示消息 ID
  # - 每个 block 作为新消息发送（而非编辑单条消息）

  # 流式输出配置
  streaming:
    # 每条消息的最小间隔（秒），避免触发 Discord 速率限制
    # Discord 限制：同一频道每 10 秒最多 5 条消息
    # 推荐值：1.0-2.0 秒
    min_message_interval: 1.5

    # 是否在第一个 block 发送后停止 typing indicator
    # false: 保持 typing indicator 直到响应完成
    # true: 第一个 block 发送后立即停止
    stop_typing_after_first_block: false

    # 是否合并短 block（减少消息数量）
    merge_short_blocks: true
    # 短 block 的最大长度（字符）
    short_block_max_length: 50
